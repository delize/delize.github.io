<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Pushing SSH keys from Okta to AD</title>
<meta name="description" content="" />
<meta name="keywords" content="" />
<meta name="author" content="Andrew Doering" />
<meta name="ROBOTS" content="">
        <!--  Custom Style CSS  -->
<link rel="stylesheet" href=https://andrewdoering.org/assets/css/style-post.css>
        <!--  Custom Style CSS  -->
<link rel="stylesheet" href=https://andrewdoering.org/assets/css/style-blog.css>
        <!--  FavIcon  -->
<link rel="apple-touch-icon" sizes="180x180" href="https://andrewdoering.org/assets/favicon//apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="https://andrewdoering.org/assets/favicon//favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="https://andrewdoering.org/assets/favicon//favicon-16x16.png" />
<link rel="manifest" href="https://andrewdoering.org/assets/favicon/site.webmanifest">

<!-- Google Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli:300,400,600%7CPoppins:400,500,600,700" />

<!--  Bootstrap CSS  -->
<!-- <link rel="stylesheet" href="https://andrewdoering.org/assets/css/bootstrap.css" /> -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/bootstrap.min.css" />
<!--  Line Icon CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/LineIcons.css" />
<!--  Font Awesome CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/all.min.css" />
<!-- <link rel="stylesheet" href="https://andrewdoering.org/assets/css/font-awesome.min.css" /> -->
<!--  Animate CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/animate.css" /> 
<!--  Magnific Popup CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/magnific-popup.css" />
<!--  Owl-carousel CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/owl.carousel.min.css" />
<!--  Custom Style CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/style-custom.css" />

        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66440601-3"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66440601-3');
</script>
        
        <style>
            .hero-bg {
              background-image: url("/assets/blog/2020/11/push-ssh-keys/img_bg.jpg")
            }
        </style>
    </head>

    <body data-spy="scroll" data-target="#scrollspy" data-offset="61" class="pt-hero">
        <!--    Header Start    -->
<header id="header" class="header page-header bg-white fixed-top">
    <nav id="scrollspy" class="navbar navbar-expand-lg header-nav">
        <div class="container">
            <a class="navbar-brand font-weight-bold text-dark" href="https://andrewdoering.org/">
                <span>Andrew Doering</span>
            </a>
            
            <!--  Navbar Toggler Button Start -->
            <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#toggle-menu" aria-controls="toggle-menu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="lni-menu size-md"></span>
            </button>
            
            <!--  Navbar Toggler Button End -->
            <div class="collapse navbar-collapse" id="toggle-menu">
                <ul class="navbar-nav nav-pills ml-auto">
                    <li class="nav-item">
                        <li><a class="nav-link text-dark" href="/blog/categories">Categories & Tags</a></li>
                         <li><a class="nav-link text-dark" href="/blog">Back to Blog</a></li>
                        
                        
                        
                    </li>
                </ul>
            </div> 
        </div>
    </nav>
</header>
<!--    Header End    -->

        <!--    Header End    -->

        <!--    Hero Start    -->
        <a class="color-scheme text-white bg-base-color d-inline-block" href="javascript:void(0)"><i class="lni-night text-white"></i><span class="text-white">Dark</span></a>
<a class="color-scheme color-scheme-light text-white bg-base-color d-none" href="javascript:void(0)"><i class="lni-sun text-white"></i><span class="text-white">Light</span></a>
        <section class="hero hero-bg page-hero py-6" id="hero">
            <div class="text-center hero-content mx-auto">
                <h1 class="text-white center mb-4 col-lg-8" style="margin=4px">Pushing SSH keys from Okta to AD</h1>
                <p class="mx-auto text-white">
                    <a href="/" class="text-white">Home</a>
                    /
                    <a href="/blog" class="text-white">Blog</a>
                    /
                    <a href="/blog/2020/11/15/pushing-ssh-keys-from-okta-to-ad/" class="text-white">Pushing SSH keys from Okta to AD</a>
                </p>
            </div>
        </section>
        <!--    Hero End    -->

        <!--   Blog-single   Start -->
        <section class="py-6">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 blog">
                        <div class="rounded px-lg-1">
                            <div class="text-md-left">
                                <h4 class="mb-4 text-centered" >Pushing SSH keys from Okta to AD</h4>
                                <img src="/assets/blog/2020/11/push-ssh-keys/img_bg.jpg" alt="" class="img-fluid w-100 rounded">
                                <span class="d-inline-block py-4"> Published: Nov 15, 2020 
                                        
                                        / By <span class="purple-color text-right"> Andrew Doering. </span>
                                        </span>
                                <p class="link-"><ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#configuring-sssd-on-linux-to-work-with-active-directory">Configuring SSSD on Linux to work with Active Directory</a></li>
  <li><a href="#modifying-the-active-directory-schema">Modifying the Active Directory Schema</a>
    <ul>
      <li><a href="#enable-schema-updates">Enable Schema Updates</a></li>
      <li><a href="#adding-the-attribute-in-ad-schema">Adding the attribute in AD schema</a></li>
      <li><a href="#adding-a-new-class-for-the-attribute">Adding a new class for the attribute</a></li>
      <li><a href="#associate-the-attribute-and-class-to-the-user-property">Associate the attribute and class to the user property</a></li>
    </ul>
  </li>
  <li><a href="#creating-an-attribute-in-oktas-user-directory-schema">Creating an attribute in Okta’s User Directory Schema</a></li>
  <li><a href="#adding-an-ssh-key-to-okta-profile">Adding an ssh key to Okta profile</a></li>
  <li><a href="#add-the-new-ad-attribute-to-the-directories-profile-in-okta">Add the new AD attribute to the Directories Profile in Okta</a></li>
  <li><a href="#pushing-attributes-from-okta-to-application">Pushing Attributes from Okta to Application</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>I really would love to implement Okta Advanced Sever Access (ASA) to our server infrastructure in our environment. ASA has three downsides:</p>

<ul>
  <li>Expensive ($50,000 minimum) depending on the amount of servers being deployed to</li>
  <li>Requires extensive management approval</li>
  <li>Requires extensive security review from our team</li>
</ul>

<p>Okta’s LDAP interface also <a href="https://help.okta.com/en/prod/Content/Topics/Directory/LDAP-interface-limitations.htm">does not support Linux/PAM officially</a>, which appears to be (more or less) an artificial limit to push/advertise the ASA product.</p>

<p>So we need to find workarounds for this. This blog post covers details on how to do to 2 things:</p>

<ul>
  <li>Expand the Active Directory schema to store and use SSH keys over LDAP.</li>
  <li>Allow for SSH Keys to be stored in Okta and pushed to Active Directory by the End User.</li>
</ul>

<h2 id="configuring-sssd-on-linux-to-work-with-active-directory">Configuring SSSD on Linux to work with Active Directory</h2>

<p>We want to configure SSSD on Linux to hook up into Active Directory (a very basic configuration file, edit it to your needs):</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre>    
    [sssd]
    domains = LDAP
    services = nss, pam
    config_file_version = 2

    [nss]
    filter_groups = root
    filter_users = root

    [pam]

    [domain/LDAP]
    id_provider = ldap
    ldap_uri = ldap://ldap.example.com
    ldap_search_base = dc=example,dc=com

    auth_provider = krb5
    krb5_server = kerberos.example.com
    krb5_realm = EXAMPLE.COM

    cache_credentials = true
    min_id = 10000
    max_id = 20000
    enumerate = False
    
</pre></td></tr></tbody></table></code></pre></div></div>

<p>I would suggest reading through <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/windows_integration_guide/sssd-integration-intro#sssd-ad-proc">Red Hat’s documentation</a> for validating the configuration. I won’t go into SSSD more in-depth here.</p>

<h2 id="modifying-the-active-directory-schema">Modifying the Active Directory Schema</h2>

<p>We will need to modify the Active Directory schema to create an attribute called sshPublicKey.</p>

<h3 id="enable-schema-updates">Enable Schema Updates</h3>

<ol>
  <li>Open up an administrative command prompt session</li>
  <li>Open up an administrative registry editor session by running <code class="language-plaintext highlighter-rouge">regedit</code></li>
  <li>Browse to <code class="language-plaintext highlighter-rouge">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\NTDS\Parameters</code>
<img src="/assets/blog/2020/11/push-ssh-keys/en-schema-update1.png" alt="Registry Path" /></li>
  <li>Add a new DWORD key that is called <code class="language-plaintext highlighter-rouge">Schema Update Allowed</code> with a value of <code class="language-plaintext highlighter-rouge">1</code>
<img src="/assets/blog/2020/11/push-ssh-keys/en-schema-update2.png" alt="Schema Update Allowed" /></li>
  <li>In the administrative session of the command prompt, run <code class="language-plaintext highlighter-rouge">regsvr32 schmmgmt.dll</code> to enable Schema Management MMC Plug-in and accept the prompt.
<img src="/assets/blog/2020/11/push-ssh-keys/en-schema-update3.png" alt="Register module" /></li>
</ol>

<h3 id="adding-the-attribute-in-ad-schema">Adding the attribute in AD schema</h3>

<p>I would highly recommend putting the project number/name in the description below, as well as what I have written.</p>

<ol>
  <li>Once the mmc window has been opened, add the schema module to the running mmc window. 
<img src="/assets/blog/2020/11/push-ssh-keys/add-attr-schema.png" alt="Open MMC window" /></li>
  <li>Expand the listing on the left hand side.</li>
  <li>Right Click on <code class="language-plaintext highlighter-rouge">Attributes</code>, and then select <code class="language-plaintext highlighter-rouge">Create New Attribute</code>.
<img src="/assets/blog/2020/11/push-ssh-keys/add-attr-schema2.png" alt="Add new attribute" /></li>
  <li>Accept the warning that pops up and continue on.</li>
  <li>For <code class="language-plaintext highlighter-rouge">Common Name</code>, enter <code class="language-plaintext highlighter-rouge">sshPublicKeys</code> in the field.</li>
  <li>For <code class="language-plaintext highlighter-rouge">LDAP Display Name</code>, enter <code class="language-plaintext highlighter-rouge">sshPublicKeys</code> in the field.</li>
  <li>For <code class="language-plaintext highlighter-rouge">Description</code>, enter <code class="language-plaintext highlighter-rouge">For Public SSH Key storage for sssd</code>.</li>
  <li>For <code class="language-plaintext highlighter-rouge">Unique X500 Object ID</code> enter the following OID, <code class="language-plaintext highlighter-rouge">1.3.6.1.4.1.24552.1.1.1.13</code>.</li>
  <li>For <code class="language-plaintext highlighter-rouge">Syntax</code>, select <code class="language-plaintext highlighter-rouge">IA5-String</code>.</li>
  <li>Check the <code class="language-plaintext highlighter-rouge">Multi-Valued</code> box.</li>
  <li>Leave both <code class="language-plaintext highlighter-rouge">Minimum</code> and <code class="language-plaintext highlighter-rouge">Maximum</code> blank.
<img src="/assets/blog/2020/11/push-ssh-keys/add-attr-schema3.png" alt="Register module" /></li>
  <li>Click <code class="language-plaintext highlighter-rouge">Ok</code>.</li>
</ol>

<h3 id="adding-a-new-class-for-the-attribute">Adding a new class for the attribute</h3>

<p>Once we have added the attribute into Active Directory, we need to add a class for the attribute to be associated with it. I would highly recommend putting the project number/name in the description as well.</p>

<ol>
  <li>Right-click on <code class="language-plaintext highlighter-rouge">Classes</code>, then click <code class="language-plaintext highlighter-rouge">Create class</code>.</li>
  <li>If presented, click <code class="language-plaintext highlighter-rouge">Continue</code> on the warning.</li>
  <li>For <code class="language-plaintext highlighter-rouge">Common Name</code>, enter <code class="language-plaintext highlighter-rouge">ldapPublicKey</code> in the text field.</li>
  <li>For <code class="language-plaintext highlighter-rouge">LDAP Display Name</code>, enter <code class="language-plaintext highlighter-rouge">ldapPublicKey</code> in the text field.</li>
  <li>For <code class="language-plaintext highlighter-rouge">Unique X500 Object ID</code>, enter <code class="language-plaintext highlighter-rouge">1.3.6.1.4.1.24552.500.1.1.2.0</code>.</li>
  <li>For <code class="language-plaintext highlighter-rouge">Description</code>, enter <code class="language-plaintext highlighter-rouge">For use with sshPublicKeys attribute</code>.</li>
  <li>For <code class="language-plaintext highlighter-rouge">Parent Class</code> enter <code class="language-plaintext highlighter-rouge">top</code>.</li>
  <li>For <code class="language-plaintext highlighter-rouge">Class Type</code>, select <code class="language-plaintext highlighter-rouge">Auxiliary</code>.
  <img src="/assets/blog/2020/11/push-ssh-keys/add-class-2.png" alt="Register module" /></li>
  <li>Click <code class="language-plaintext highlighter-rouge">Next</code></li>
  <li>Under <code class="language-plaintext highlighter-rouge">Optional</code>, select <code class="language-plaintext highlighter-rouge">Add</code>, and scroll to find <code class="language-plaintext highlighter-rouge">sshPublicKeys</code>, click <code class="language-plaintext highlighter-rouge">Ok</code>.
  <img src="/assets/blog/2020/11/push-ssh-keys/add-class-3.png" alt="Register module" /></li>
  <li>Click <code class="language-plaintext highlighter-rouge">Finish</code> and leave the Schema MMC window open.</li>
</ol>

<h3 id="associate-the-attribute-and-class-to-the-user-property">Associate the attribute and class to the user property</h3>

<ol>
  <li>With the schema window still open on <code class="language-plaintext highlighter-rouge">Classes</code>, find the <code class="language-plaintext highlighter-rouge">user</code> class 
  <img src="/assets/blog/2020/11/push-ssh-keys/associate-class-1.png" alt="Schema window" /></li>
  <li>Right-click select on <code class="language-plaintext highlighter-rouge">properties</code>.
  <img src="/assets/blog/2020/11/push-ssh-keys/associate-class-2.png" alt="Properties value" /></li>
  <li>Select the <code class="language-plaintext highlighter-rouge">Relationship</code> tab, and click <code class="language-plaintext highlighter-rouge">Add Class...</code>
  <img src="/assets/blog/2020/11/push-ssh-keys/associate-class-3.png" alt="Relationship Tab" /></li>
  <li>Select <code class="language-plaintext highlighter-rouge">ldapPublicKey</code> and click <code class="language-plaintext highlighter-rouge">Ok</code>.
  <img src="/assets/blog/2020/11/push-ssh-keys/associate-class-4.png" alt="Selecting ldapPublicKey class" /></li>
  <li>Select the <code class="language-plaintext highlighter-rouge">Attributes</code> tab and click <code class="language-plaintext highlighter-rouge">Add</code> under <code class="language-plaintext highlighter-rouge">Optional</code>.
  <img src="/assets/blog/2020/11/push-ssh-keys/associate-attr-1.png" alt="Associate attribute tab" /></li>
  <li>Select <code class="language-plaintext highlighter-rouge">sshPublicKey</code> and click <code class="language-plaintext highlighter-rouge">Ok</code>.
  <img src="/assets/blog/2020/11/push-ssh-keys/associate-attr-2.png" alt="Associate attribute tab" /></li>
  <li>Click <code class="language-plaintext highlighter-rouge">Apply</code> and then click <code class="language-plaintext highlighter-rouge">Ok</code></li>
  <li>Proceed to close the MMC window.</li>
</ol>

<h2 id="creating-an-attribute-in-oktas-user-directory-schema">Creating an attribute in Okta’s User Directory Schema</h2>

<p>We will begin to create the attribute under Okta’s Universal Directory.</p>

<ol>
  <li>Go to <a href="https://yourdomain.okta.com/admin/universaldirectory"><code class="language-plaintext highlighter-rouge">https://yourdomain.okta.com/admin/universaldirectory</code></a></li>
  <li>
    <p>Select <code class="language-plaintext highlighter-rouge">Profile</code> under <code class="language-plaintext highlighter-rouge">User (default)</code>
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-step1.png" alt="Okta Universal Directory" /></p>
  </li>
  <li>
    <p>Select <code class="language-plaintext highlighter-rouge">Add Attribute</code>
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-step2.png" alt="Okta Profile" /></p>
  </li>
  <li>
    <p>Once the <code class="language-plaintext highlighter-rouge">Add Attribute</code> window has appeared, fill out the prompts with the following options:
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-step3.png" alt="Okta step 3" /></p>

    <ul>
      <li>Display Name: <code class="language-plaintext highlighter-rouge">SSH Public Key</code></li>
      <li>Variable Name: <code class="language-plaintext highlighter-rouge">sshPublicKey</code></li>
      <li>Description: Add what you would like here, an example is below in the photograph</li>
      <li>Once done, select <code class="language-plaintext highlighter-rouge">Save</code></li>
    </ul>
  </li>
  <li>
    <p>Once the attribute is created, scroll down to the bottom, and find the newly created Okta attribute and click the pencil icon to edit the attribute.
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-step4.png" alt="Okta step 4" /></p>
  </li>
  <li>You will want to change the attributes to match to the picture below.
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-step5.png" alt="Okta step 5" /></li>
</ol>

<p>The reason for this is to allow user’s to modify the contents of the attribute value, and to not have a profile master potentially override or own the attribute contents.</p>

<h2 id="adding-an-ssh-key-to-okta-profile">Adding an ssh key to Okta profile</h2>

<ol>
  <li>Go to <a href="https://yourdomain.okta.com/enduser/settings"><code class="language-plaintext highlighter-rouge">https://yourdomain.okta.com/enduser/settings</code></a></li>
  <li>Select <code class="language-plaintext highlighter-rouge">Edit Profile</code>
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-profile-add-key1.png" alt="Edit Profile" /></li>
  <li>If prompted enter your pasword, if not proceed to the next step.</li>
  <li>Click <code class="language-plaintext highlighter-rouge">Edit</code>
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-profile-add-key2.png" alt="Edit" /></li>
  <li>Within the <code class="language-plaintext highlighter-rouge">[]</code>, add your SSH Key wrapped in <code class="language-plaintext highlighter-rouge">"</code>. An example of this would be shown below.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>  ["ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAoi9tCoNOkZgrOpEm2aoVY3uWNUq3MvNSHrgC9r2ELyVpODAz7eCFswszhtYB2o1FPqarJxJq3QQjflhEAZ16o7oaMD8kWzTdGMBjy9vynCr9dMQTuWoEBlAFNsjK1xdaJyWM2sEFV7p6c85yxeeDei1wBPc1AA4X9H2uS4ZTjaNm/Zobe7j7q8lc/e2Sb0tvY0auLv1sRRScxgZFQ5X/uMK0VtcubXxWxh6JceOb4BZRmHDCXOmX3z3wevtuDw6udafyZ6sjowSFH+PD+p7V97m9S81mQAuXfXzgmd/LrRlxHuzx0DpHKbi623lDvWWNb9QJwlLKbfMEP/DGPiEdsw== example-key"]
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p><img src="/assets/blog/2020/11/push-ssh-keys/okta-profile-add-key3.png" alt="Profile with ssh key" /></p>
  </li>
  <li>Select <code class="language-plaintext highlighter-rouge">Save</code></li>
</ol>

<p>From here, if you need to add new keys, simply put them in a comma delimited format. So multiple keys would look like <code class="language-plaintext highlighter-rouge">["key 1", "key 2", "key 3"]</code>.</p>

<h2 id="add-the-new-ad-attribute-to-the-directories-profile-in-okta">Add the new AD attribute to the Directories Profile in Okta</h2>

<p>One crucial step in allowing us to push the content down is to add the attribute from Active Directory so that Okta is aware of it.</p>

<ol>
  <li>Go to <a href="https://yourdomain.okta.com/admin/universaldirectory"><code class="language-plaintext highlighter-rouge">https://yourdomain.okta.com/admin/universaldirectory</code></a> and select <code class="language-plaintext highlighter-rouge">Directories</code>, then select your domain.
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-to-ad-step1.png" alt="Okta Universal Directory - Profile Editor" /></li>
  <li>Click <code class="language-plaintext highlighter-rouge">Profile</code>, once the page finishes loading, select <code class="language-plaintext highlighter-rouge">Add Attribute</code>, and then search for <code class="language-plaintext highlighter-rouge">sshPublicKey</code>
  <img src="/assets/blog/2020/11/push-ssh-keys/add-ssh-attr-to-okta.png" alt="Okta Universal Directory - Profile Editor" /></li>
  <li>Click <code class="language-plaintext highlighter-rouge">Save</code></li>
</ol>

<h2 id="pushing-attributes-from-okta-to-application">Pushing Attributes from Okta to Application</h2>

<p>Before doing this, announce to your users will use a change. This could be a breaking change if SSH Keys are not saved into the user’s Okta profile. We will use Active Directory as the example application here, but this could be used in other ways.</p>

<ol>
  <li>Go to <a href="https://yourdomain.okta.com/admin/universaldirectory"><code class="language-plaintext highlighter-rouge">https://yourdomain.okta.com/admin/universaldirectory</code></a> and select <code class="language-plaintext highlighter-rouge">Directories</code>, then select your domain.
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-to-ad-step1.png" alt="Okta Universal Directory - Profile Editor" /></li>
  <li>Click <code class="language-plaintext highlighter-rouge">Mappings</code>, and then select <code class="language-plaintext highlighter-rouge">Configure User Mappings</code>
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-to-ad-step2.png" alt="Okta Universal Directory - Configure Mappings" /></li>
  <li>Select the <code class="language-plaintext highlighter-rouge">Okta User to domain.com</code>
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-to-ad-step3.png" alt="Okta to User" /></li>
  <li>Scroll down to your <code class="language-plaintext highlighter-rouge">sshPublicKey</code> attribute on the right column and search for <code class="language-plaintext highlighter-rouge">sshPublicKey</code> on the left column. 
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-to-ad-step4.png" alt="sshPublicKey Push" /></li>
  <li>Validate with a user that has saved SSH Keys to their Okta profile, before clicking save. Once validated, select <code class="language-plaintext highlighter-rouge">Save mapping</code>.</li>
</ol>

<p>From here, your user’s SSH keys should be in a multi value format pushed down to Active Directory. Note, there are two values here, as I added the SSH key twice to the Okta profile to show the multi-valued aspect.
<img src="/assets/blog/2020/11/push-ssh-keys/ssh-keys-added-to-ad.png" alt="Finished Result" /></p>

<p>From here, you could use tools like Ansible, SSSD, and others, to pull the content/value out of Active Directory for use with other services and systems. This could also be done directly to the LDAP Interface on Okta, however, that is not officially supported.</p>
</p>
                                
                                    
                                        <div id="disqus_thread"></div>
<script>

var disqus_config = function () {
this.page.url = "https://andrewdoering.org/blog/2020/11/14/pushing-ssh-keys-from-okta-to-ad";  
this.page.identifier = "pushing-ssh-keys-from-okta-to-ad"; 
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://andrewdoering-org.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
                                    
                                

                            </div>
                        </div>
                    </div>
                </div>
            </div>
                
        </section>
        
        <!--   Blog-Single End  -->


        <!--   Footer Start  -->
<footer class="bg-dark">
    <div class="container">
        <div class="row py-5">
            <div class="col-lg-4">
                <h4 class="text-white mt-3 mt-lg-0">About <span class="base-color"> Me</span></h4>
                <p class="text-white pt-3 mb-0">Andrew Doering resides in San Francisco, and currently maintains a position at
                    ThousandEyes as a Senior IT Engineer. </p>
            </div>
            <div class="col-lg-4">
                <h4 class="text-white mt-3 mt-lg-0">Contact <span class="base-color">Me</span></h4>
                <ul class="list-unstyled text-white pt-2 mb-0">
                    <li class="py-1"><i class="fas fa-map-marker-alt pr-2"></i> San Francisco, CA, USA</li>
                    <li class="py-1"><a class="text-white link-hover" href="tel:+1 919 904 4396"><i class="fas fa-phone-square-alt pr-2" aria-hidden="true"></i>
                        +1 919 904 4396</a></li>
                    <li class="py-1"><a class="text-white link-hover" href="mailto:contact@andrewdoering.org"><i class="fas fa-envelope pr-2 pr-2" aria-hidden="true"></i>
                        contact@andrewdoering.org</a></li>        
                </ul>
            </div>
            <div class="col-lg-4">
                <h4 class="text-white mt-3 mt-lg-0">My <span class="base-color">Socials</span></h4>
                <ul class="list-unstyled text-white socials pt-2 mb-0">
                    <li class="py-1"><a class="text-white link-hover" href="https://www.facebook.com/and.doe"><i class="fab fa-facebook-f pr-2" aria-hidden="true"></i>
                            Facebook</a></li>
                    <li class="py-1"><a class="text-white link-hover" href="https://www.linkedin.com/in/andrewdoering"><i class="fab fa-linkedin pr-2"
                                aria-hidden="true"></i> LinkedIn</a></li>
                    <li class="py-1"><a class="text-white link-hover" href="https://www.github.com/delize"><i class="fab fa-github pr-1" aria-hidden="true"></i>
                            Github</a></li>
                    <li class="py-1"><a class="text-white link-hover" href="https://www.instagram.com/dolos01"><i class="fab fa-instagram pr-2" aria-hidden="true"></i>
                            Instagram</a></li>
                    <li class="py-1"><a class="text-white link-hover" href="skype:andrew-doering"><i class="fab fa-skype pr-2" aria-hidden="true"></i> andrew-doering</a>
                    </li>
                    <li class="py-1"><a class="text-white link-hover" href="https://www.macadmins.org/"><i class="fab fa-slack pr-2" aria-hidden="true"></i> @heimdall</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
                <div class="col-lg-12 border-top pb-5 align-center">
                    <a class="text-white link-hover" href="https://www.github.com/delize/delize.github.io"><span class="mt-3 mb-0 d-lg-inline-block align-left text-center text-white link-hover d-block d-lg-inline-block float-lg-left">See me on Github © 2021</span></a>
                    <a class="text-white link-hover" href="/donate"><span class="mt-3 mb-0 d-lg-inline-block align-center d-block text-white link-hover">Donate!</span></a>
                <a class="mt-4 mt-lg-3 mb-0 text-white back-to-top d-block d-lg-inline-block float-lg-right text-center" href="javascript:void(0);">Back To Top</a>
            </div>
        </div>
    </div>
</footer>
<!--   Footer End  -->
        <!--  JavaScripts  -->
<script src=https://andrewdoering.org/assets/js/jquery-3.4.1.min.js></script>
<!--  Bootstrap Js  -->
<!-- <script src="assets/js/bootstrap.js"></script> -->
<script src=https://andrewdoering.org/assets/js/bootstrap.min.js></script>
<!--  Easing Js  -->
<script src=https://andrewdoering.org/assets/js/jquery.easing.min.js></script>
<!--  Isotope Js  -->
<script src=https://andrewdoering.org/assets/js/slyslider.js></script>
<!--  Pop UP JS Js  -->
<script src=https://andrewdoering.org/assets/js/jquery.magnific-popup.min.js></script>
<!--  Owl carousel Js  -->
<script src=https://andrewdoering.org/assets/js/owl.carousel.min.js></script>
<!--  Wow Js  -->
<script src=https://andrewdoering.org/assets/js/wow.min.js></script>
<!--  Typed Js  -->
<script src=https://andrewdoering.org/assets/js/typed.js></script>
<!--  Custom JS  -->
<script src=https://andrewdoering.org/assets/js/uone.js></script>


    </body>
</html>
