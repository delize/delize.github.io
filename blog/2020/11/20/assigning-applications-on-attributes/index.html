<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tracking Github Accounts and automatically assigning the application</title>
<meta name="description" content="" />
<meta name="keywords" content="" />
<meta name="author" content="Andrew Doering" />
<meta name="ROBOTS" content="">
        <!--  Custom Style CSS  -->
<link rel="stylesheet" href=https://andrewdoering.org/assets/css/style-post.css>
        <!--  Custom Style CSS  -->
<link rel="stylesheet" href=https://andrewdoering.org/assets/css/style-blog.css>
        <!--  FavIcon  -->
<link rel="apple-touch-icon" sizes="180x180" href="https://andrewdoering.org/assets/favicon//apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="https://andrewdoering.org/assets/favicon//favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="https://andrewdoering.org/assets/favicon//favicon-16x16.png" />
<link rel="manifest" href="https://andrewdoering.org/assets/favicon/site.webmanifest">

<!-- Google Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli:300,400,600%7CPoppins:400,500,600,700" />

<!--  Bootstrap CSS  -->
<!-- <link rel="stylesheet" href="https://andrewdoering.org/assets/css/bootstrap.css" /> -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/bootstrap.min.css" />
<!--  Line Icon CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/LineIcons.css" />
<!--  Font Awesome CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/all.min.css" />
<!-- <link rel="stylesheet" href="https://andrewdoering.org/assets/css/font-awesome.min.css" /> -->
<!--  Animate CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/animate.css" /> 
<!--  Magnific Popup CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/magnific-popup.css" />
<!--  Owl-carousel CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/owl.carousel.min.css" />
<!--  Custom Style CSS  -->
<link rel="stylesheet" href="https://andrewdoering.org/assets/css/style-custom.css" />

        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66440601-3"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66440601-3');
</script>
        
        <style>
            .hero-bg {
              background-image: url("/assets/blog/2020/11/assign-github-on-attribute/pexels-thisisengineering-3861943.jpg")
            }
        </style>
    </head>

    <body data-spy="scroll" data-target="#scrollspy" data-offset="61" class="pt-hero">
        <!--    Header Start    -->
<header id="header" class="header page-header bg-white fixed-top">
    <nav id="scrollspy" class="navbar navbar-expand-lg header-nav">
        <div class="container">
            <a class="navbar-brand font-weight-bold text-dark" href="https://andrewdoering.org/">
                <span>Andrew Doering</span>
            </a>
            
            <!--  Navbar Toggler Button Start -->
            <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#toggle-menu" aria-controls="toggle-menu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="lni-menu size-md"></span>
            </button>
            
            <!--  Navbar Toggler Button End -->
            <div class="collapse navbar-collapse" id="toggle-menu">
                <ul class="navbar-nav nav-pills ml-auto">
                    <li class="nav-item">
                        <li><a class="nav-link text-dark" href="/blog/categories">Categories & Tags</a></li>
                         <li><a class="nav-link text-dark" href="/blog">Back to Blog</a></li>
                        
                        
                        
                    </li>
                </ul>
            </div> 
        </div>
    </nav>
</header>
<!--    Header End    -->

        <!--    Header End    -->

        <!--    Hero Start    -->
        <a class="color-scheme text-white bg-base-color d-inline-block" href="javascript:void(0)"><i class="lni-night text-white"></i><span class="text-white">Dark</span></a>
<a class="color-scheme color-scheme-light text-white bg-base-color d-none" href="javascript:void(0)"><i class="lni-sun text-white"></i><span class="text-white">Light</span></a>
        <section class="hero hero-bg page-hero py-6" id="hero">
            <div class="text-center hero-content mx-auto">
                <h1 class="text-white center mb-4 col-lg-8" style="margin=4px">Tracking Github Accounts and automatically assigning the application</h1>
                <p class="mx-auto text-white">
                    <a href="/" class="text-white">Home</a>
                    /
                    <a href="/blog" class="text-white">Blog</a>
                    /
                    <a href="/blog/2020/11/20/assigning-applications-on-attributes/" class="text-white">Tracking Github Accounts and automatically assigning the application</a>
                </p>
            </div>
        </section>
        <!--    Hero End    -->

        <!--   Blog-single   Start -->
        <section class="py-6">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 blog">
                        <div class="rounded px-lg-1">
                            <div class="text-md-left">
                                <h4 class="mb-4 text-centered" >Tracking Github Accounts and automatically assigning the application</h4>
                                <img src="/assets/blog/2020/11/assign-github-on-attribute/pexels-thisisengineering-3861943.jpg" alt="" class="img-fluid w-100 rounded">
                                <span class="d-inline-block py-4"> Published: Nov 20, 2020 
                                        
                                        / By <span class="purple-color text-right"> Andrew Doering. </span>
                                        </span>
                                <p class="link-"><h2 id="introduction">Introduction</h2>

<p>We historically had made a change from Github Enterprise to Github Cloud. One of the downsides of this is that this would require external Github accounts that were not really within “control”, or included management of accounts. We needed to setup tracking of this information. We also needed a way to automate groups, which up <a href="https://docs.github.com/en/free-pro-team@latest/github/setting-up-and-managing-organizations-and-teams/synchronizing-a-team-with-an-identity-provider-group">until recently</a> was not possible. However, the route we did go was able to be done in a self-service aspect (with a few limitations).</p>

<h2 id="create-an-okta-mastered-attribute">Create an Okta mastered attribute</h2>

<p>So very similar to the blog post on pushing <a href="https://andrewdoering.org/blog/2020/11/15/pushing-ssh-keys-from-okta-to-ad/">SSH keys from Okta to AD</a>, we need to create an attribute to host Github Account information.</p>

<ol>
  <li>Go to <a href="https://yourdomain.okta.com/admin/universaldirectory"><code class="language-plaintext highlighter-rouge">https://yourdomain.okta.com/admin/universaldirectory</code></a></li>
  <li>
    <p>Select <code class="language-plaintext highlighter-rouge">Profile</code> under <code class="language-plaintext highlighter-rouge">User (default)</code>
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-step1.png" alt="Okta Universal Directory" /></p>
  </li>
  <li>
    <p>Select <code class="language-plaintext highlighter-rouge">Add Attribute</code>
  <img src="/assets/blog/2020/11/push-ssh-keys/okta-step2.png" alt="Okta Profile" /></p>
  </li>
  <li>Once the <code class="language-plaintext highlighter-rouge">Add Attribute</code> window has appeared, fill out the prompts with the following options:
    <ul>
      <li>Display Name: <code class="language-plaintext highlighter-rouge">SSH Public Key</code></li>
      <li>Variable Name: <code class="language-plaintext highlighter-rouge">com_github_accountname</code> or <code class="language-plaintext highlighter-rouge">com_github_username</code></li>
      <li>Description: Add what you would like here, an example is below in the photograph</li>
      <li>Once done, select <code class="language-plaintext highlighter-rouge">Save</code></li>
    </ul>
  </li>
  <li>
    <p>Once the attribute is created, scroll down to the bottom, and find the newly created Okta attribute and click the pencil icon to edit the attribute.
  <img src="/assets/blog/2020/11/assign-github-on-attribute/github-attribute-1.png" alt="Okta step 4" /></p>
  </li>
  <li>
    <p>You will want to change the attributes for <code class="language-plaintext highlighter-rouge">User Permission</code> and <code class="language-plaintext highlighter-rouge">Master Priority</code> to match to the picture below.
  <img src="/assets/blog/2020/11/assign-github-on-attribute/github-attribute-2.png" alt="Okta step 5" /></p>
  </li>
  <li>While optional, you may also want to change the <code class="language-plaintext highlighter-rouge">Attribute Length</code> to <code class="language-plaintext highlighter-rouge">1</code> to <code class="language-plaintext highlighter-rouge">39</code>. Github has a maximum value of 39 characters, which can be seen <a href="https://github.com/shinnn/github-username-regex">here</a> and <a href="https://gist.github.com/tonybruess/9405134">here</a>, and <a href="https://github.com/join">here</a> (only when typing something more than 39 characters). This way there is validation of the account name length in place and someone doesn’t put the incorrect account in potentially.</li>
</ol>

<h2 id="create-okta-group--rule">Create Okta group &amp; rule</h2>

<h3 id="group">Group</h3>

<p>Create a group that will be assigned to the Okta application. My recommendation would be to call it <code class="language-plaintext highlighter-rouge">iam_github</code> or something to that extent, just to keep things very simple. You can go ahead and manually add a few people there for now, however, you ultimately do not want to manually assign users to this group, so that the group rule can take effect.</p>

<h3 id="group-rule">Group Rule</h3>

<p>For a basic implementation of assigning the Okta application to the user. This is assuming that you do not have team groups configured/setup, and only have a single group assigned to the Github applications. If you want to also do validation (as in, you require a prefix, or suffix attached to the account), you can modify the expression language below to validate that an account matches those requirements before assigning the application.</p>

<ul>
  <li>Okta Expression Language: <code class="language-plaintext highlighter-rouge">(user.com_github_username != null or user.com_github_username == "" )</code></li>
  <li>Okta Group: Your Github application group</li>
</ul>

<p>Once created, mark it as active.</p>

<h2 id="assign-the-group-to-the-application">Assign the group to the application</h2>

<p>Once the group &amp; rule is finished being created, assign the group to the application.</p>

<h1 id="so-what-happens-now">So what happens now?</h1>

<p>If an employee has not filled out the attribute in their Okta profile, they will not be assigned the application. When an employee does fill out the application, if you have added the syntax check (such as a suffix of prefix), it will assign the application assuming it meets any checks.</p>

<p>Once added to Github, without doing the previously mentioned assigning users to <a href="https://docs.github.com/en/free-pro-team@latest/github/setting-up-and-managing-organizations-and-teams/synchronizing-a-team-with-an-identity-provider-group">teams</a>. Everything going forward would be self-service/self-requested when joining teams within the org. And from there, managers of each team can get approval notifications and add team members to the team once the SSO connection has been established.</p>

<p>You can further expand on this by creating multiple groups and checks within the rule, for instance, creating a group rule that checks against department attribute + okta username, to assign a different group and assign them the appropriate team with the URL above. However, you are still limited to five groups per team. So there needs to be careful consideration on how you apply those groups.</p>

<p>The other option is to do this using Okta workflows, this would do things directly against the API, and may not be limited to the five team limitation as described in the Github documentation.</p>
</p>
                                
                                    
                                        <div id="disqus_thread"></div>
<script>

var disqus_config = function () {
this.page.url = "https://andrewdoering.org/blog/2020/11/20/assigning-applications-on-attributes";  
this.page.identifier = "assigning-applications-on-attributes"; 
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://andrewdoering-org.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
                                    
                                

                            </div>
                        </div>
                    </div>
                </div>
            </div>
                
        </section>
        
        <!--   Blog-Single End  -->


        <!--   Footer Start  -->
<footer class="bg-dark">
    <div class="container">
        <div class="row py-5">
            <div class="col-lg-4">
                <h4 class="text-white mt-3 mt-lg-0">About <span class="base-color"> Me</span></h4>
                <p class="text-white pt-3 mb-0">Andrew Doering resides in San Francisco, and currently maintains a position at
                    ThousandEyes as a Senior IT Engineer. </p>
            </div>
            <div class="col-lg-4">
                <h4 class="text-white mt-3 mt-lg-0">Contact <span class="base-color">Me</span></h4>
                <ul class="list-unstyled text-white pt-2 mb-0">
                    <li class="py-1"><i class="fas fa-map-marker-alt pr-2"></i> San Francisco, CA, USA</li>
                    <li class="py-1"><a class="text-white link-hover" href="tel:+1 919 904 4396"><i class="fas fa-phone-square-alt pr-2" aria-hidden="true"></i>
                        +1 919 904 4396</a></li>
                    <li class="py-1"><a class="text-white link-hover" href="mailto:contact@andrewdoering.org"><i class="fas fa-envelope pr-2 pr-2" aria-hidden="true"></i>
                        contact@andrewdoering.org</a></li>        
                </ul>
            </div>
            <div class="col-lg-4">
                <h4 class="text-white mt-3 mt-lg-0">My <span class="base-color">Socials</span></h4>
                <ul class="list-unstyled text-white socials pt-2 mb-0">
                    <li class="py-1"><a class="text-white link-hover" href="https://www.facebook.com/and.doe"><i class="fab fa-facebook-f pr-2" aria-hidden="true"></i>
                            Facebook</a></li>
                    <li class="py-1"><a class="text-white link-hover" href="https://www.linkedin.com/in/andrewdoering"><i class="fab fa-linkedin pr-2"
                                aria-hidden="true"></i> LinkedIn</a></li>
                    <li class="py-1"><a class="text-white link-hover" href="https://www.github.com/delize"><i class="fab fa-github pr-1" aria-hidden="true"></i>
                            Github</a></li>
                    <li class="py-1"><a class="text-white link-hover" href="https://www.instagram.com/dolos01"><i class="fab fa-instagram pr-2" aria-hidden="true"></i>
                            Instagram</a></li>
                    <li class="py-1"><a class="text-white link-hover" href="skype:andrew-doering"><i class="fab fa-skype pr-2" aria-hidden="true"></i> andrew-doering</a>
                    </li>
                    <li class="py-1"><a class="text-white link-hover" href="https://www.macadmins.org/"><i class="fab fa-slack pr-2" aria-hidden="true"></i> @heimdall</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
                <div class="col-lg-12 border-top pb-5 align-center">
                    <a class="text-white link-hover" href="https://www.github.com/delize/delize.github.io"><span class="mt-3 mb-0 d-lg-inline-block align-left text-center text-white link-hover d-block d-lg-inline-block float-lg-left">See me on Github © 2021</span></a>
                    <a class="text-white link-hover" href="/donate"><span class="mt-3 mb-0 d-lg-inline-block align-center d-block text-white link-hover">Donate!</span></a>
                <a class="mt-4 mt-lg-3 mb-0 text-white back-to-top d-block d-lg-inline-block float-lg-right text-center" href="javascript:void(0);">Back To Top</a>
            </div>
        </div>
    </div>
</footer>
<!--   Footer End  -->
        <!--  JavaScripts  -->
<script src=https://andrewdoering.org/assets/js/jquery-3.4.1.min.js></script>
<!--  Bootstrap Js  -->
<!-- <script src="assets/js/bootstrap.js"></script> -->
<script src=https://andrewdoering.org/assets/js/bootstrap.min.js></script>
<!--  Easing Js  -->
<script src=https://andrewdoering.org/assets/js/jquery.easing.min.js></script>
<!--  Isotope Js  -->
<script src=https://andrewdoering.org/assets/js/slyslider.js></script>
<!--  Pop UP JS Js  -->
<script src=https://andrewdoering.org/assets/js/jquery.magnific-popup.min.js></script>
<!--  Owl carousel Js  -->
<script src=https://andrewdoering.org/assets/js/owl.carousel.min.js></script>
<!--  Wow Js  -->
<script src=https://andrewdoering.org/assets/js/wow.min.js></script>
<!--  Typed Js  -->
<script src=https://andrewdoering.org/assets/js/typed.js></script>
<!--  Custom JS  -->
<script src=https://andrewdoering.org/assets/js/uone.js></script>


    </body>
</html>
